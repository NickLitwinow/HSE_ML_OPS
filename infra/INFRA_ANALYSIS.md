# Анализ Инфраструктуры: Terraform vs Ansible

## Сценарий: Автоматизация FireWatch.ai

| № | Задача | Инструмент | Обоснование |
|---|---|---|---|
| 1 | Создать каталог (Folder) | **Terraform** | Управление иерархией облака (каталоги, организации) — это структурное состояние инфраструктуры, которым лучше всего управлять через state-файл Terraform. |
| 2 | Создать VPC и подсеть | **Terraform** | Сеть — это базовая инфраструктура. Terraform идеально подходит для определения топологии и зависимостей сетевых ресурсов. |
| 3 | Создать бакет в Object Storage | **Terraform** | Бакеты для хранения — это персистентные инфраструктурные ресурсы. Terraform гарантирует их существование с правильной конфигурацией. |
| 4 | Создать виртуальную машину | **Terraform** | Провижининг вычислительных ресурсов (VM) — это основной сценарий использования Terraform (Infrastructure Provisioning). |
| 5 | Настроить группу безопасности | **Terraform** | Группы безопасности — это сетевые фаерволы облачного уровня, тесно связанные с VPC и VM, поэтому они являются частью определения инфраструктуры. |
| 6 | Установить python3, docker | **Ansible** | Управление конфигурацией внутри ОС. Ansible превосходно справляется с управлением пакетами и обеспечением состояния ПО на существующих серверах. |
| 7 | Установить uv через pip | **Ansible** | Управление зависимостями уровня приложения. Модули Ansible (pip) делают этот процесс идемпотентным и простым в управлении. |
| 8 | Создать пользователя ml-dev | **Ansible** | Управление пользователями внутри ОС — это задача конфигурации. Модуль `user` в Ansible идеально подходит для этого. |
| 9 | Скопировать requirements.txt | **Ansible** | Передача файлов и развертывание артефактов приложения на сервер — стандартные задачи для Ansible. |
| 10 | Удалить виртуальную машину | **Terraform** | Управление жизненным циклом (уничтожение) облачных ресурсов осуществляется через `terraform destroy` или удаление ресурса из кода. |

## Итог
- **Terraform** используется для **Провижининга (Provisioning)**: Создание "скелета" инфраструктуры (Сети, VM, Хранилище, IAM).
- **Ansible** используется для **Конфигурации (Configuration)**: Настройка "начинки" серверов (ПО, Пользователи, Конфиги).
